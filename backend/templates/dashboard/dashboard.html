{% extends 'base.html' %}

{% block head_title %}Übersicht{% endblock %}

{% block content %}
<div class="md:flex items-center mb-6">
  <h1 class="font-bold text-2xl text-green-500">{{ greeting }}, {{ user.name }}!</h1>
  <a class="my-5 md:my-0 ml-auto button button-primary" href="{% url 'seminar_apply' %}">
    Seminar anmelden
  </a>
</div>

{% if not user.telephone %}
<div class="mb-12 rounded px-4 py-3 max-w-xl bg-white shadow">
  <h2 class="font-bold text-lg mb-2 text-red-600">Keine Telefonnummer angegeben ☹</h2>
  <p class="text-sm">Bitte gib uns deine Telefonnummer, damit wir dich bei <strong>dringenden Abrechnungsproblemen</strong> erreichen können.</p>

  <div class="flex justify-end">
    <a href="{% url 'account_profile' %}" class="text-sm flex items-center mt-3 hover:underline">
      Nummer angeben
      <svg viewBox="0 0 20 20" class="ml-2 fill-current h-3 w-3"><path d="M16.172 9l-6.071-6.071 1.414-1.414L20 10l-.707.707-7.778 7.778-1.414-1.414L16.172 11H0V9z"></path></svg>
    </a>
  </div>
</div>
{% endif %}

{% if janun_groups|length > 0 %}
  <div class="mb-10">
    <h2 class="font-bold text-xl mb-4">
      Deine Gruppen
      <small class="text-sm text-gray-600 font-normal">({{ janun_groups|length }})</small>
    </h2>
    <div class="flex flex-wrap items-stretch -m-4">
      {% for group in janun_groups.all %}
        <div class="lg:w-1/4 sm:w-1/2 w-full p-4">
          <a class="block h-full bg-white rounded shadow hover:shadow-md p-4 no-underline flex flex-col text-gray-600"
             style="min-height: 60px;"
             href="{{ group.get_absolute_url }}">
            <h3 class="mt-1 mb-1 leading-tight text-gray-800 font-bold">
              {{ group.name }}
            </h3>
          </a>
        </div>
      {% endfor %}
    </div>
    {% if not user.is_reviewed %}
      <p class="my-2 text-gray-700 italic">
        Du kannst aber z.Z. auf keine Gruppendetails zugreifen,
        da dein Konto noch nicht überprüft wurde.
      </p>
    {% endif %}
  </div>
{% endif %}


{% if group_hats|length > 0 %}
  <div class="mb-10">
    <h2 class="font-bold text-xl mb-4">
      Deine Gruppenhüte
      <small class="text-sm text-gray-600 font-normal">({{ group_hats|length }})</small>
    </h2>
    <div class="flex flex-wrap items-stretch -m-4">
      {% for group in group_hats.all %}
        <div class="lg:w-1/4 sm:w-1/2 w-full p-4">
          <a class="block h-full bg-white rounded shadow hover:shadow-md p-4 no-underline flex flex-col text-gray-600"
             style="min-height: 60px;"
             href="{{ group.get_absolute_url }}">
            <h3 class="mt-1 mb-1 leading-tight text-gray-800 font-bold">
              {{ group.name }}
            </h3>
          </a>
        </div>
      {% endfor %}
    </div>
    {% if not user.is_reviewed %}
      <p class="my-2 text-gray-700 italic">
        Du kannst aber z.Z. auf keine Gruppendetails zugreifen,
        da dein Konto noch nicht überprüft wurde.
      </p>
    {% endif %}
  </div>
{% endif %}


<h2 class="font-bold text-xl mb-6">
  Deine letzten Seminare
</h2>

{% if seminars %}
  <div class="flex flex-wrap items-stretch -m-4">
    {% for seminar in seminars %}
      <div class="lg:w-1/3 sm:w-1/2 w-full p-4">
        {% include "seminars/_seminar_card.html" %}
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>Keine Seminare gefunden.</p>
{% endif %}

{% if show_more_link %}
  <div class="md:flex my-8">
    <a href="#" class="flex items-center ml-auto button">
      Alle Seminare
      <svg viewBox="0 0 20 20" class="ml-2 fill-current h-3 w-3"><path d="M16.172 9l-6.071-6.071 1.414-1.414L20 10l-.707.707-7.778 7.778-1.414-1.414L16.172 11H0V9z"></path></svg>
    </a>
  </div>
{% endif %}

{% endblock content %}
