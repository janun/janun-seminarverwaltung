{% extends "account/base.html" %}
{% load crispy_forms_tags %}

{% block head_title %}{{ block.super }} Dein Profil{% endblock %}

{% block content %}
<div class="mx-auto max-w-xl md:bg-white md:shadow-lg md:px-8 pb-8 pt-4 rounded-lg">
  <h1 class="mb-8 font-bold text-2xl text-green-500">Dein Profil</h1>

  <form class="login" method="POST" action="">
    {% csrf_token %}
    {% crispy form %}

    <div class="flex flex-wrap border-b-2 border-gray-300 pb-5 mb-5">
        <div class="block w-full md:w-1/3 text-green-500 mb-5 font-bold text-lg">
          Berechtigungen
        </div>
        <div class="block w-full md:w-2/3">

          <div class="mb-4">
            <div class="col-form-label">Konto-Rolle</div>
            {{ user.role }}
          </div>

          <div class="mb-4">
            <div class="col-form-label">Gruppen-Mitgliedschaften</div>
            {% if user.janun_groups.all %}
              <p>Du bist Mitlied in:</p>
              <ul>
                {% for group in user.janun_groups.all %}
                  <li><a class="text-green-500" href="{% url 'group_detail' group.slug %}">{{ group.name }}</a></li>
                {% endfor %}
              </ul>
            {% else %}
              <p>Du bist in keinen Gruppen Mitglied.</p>
            {% endif %}
          </div>

          {% if user.is_staff %}
          <div class="mb-4">
            <div class="col-form-label">Gruppen-H端te</div>
            {% if user.group_hats.all %}
              <p>Du hast Gruppen-H端te f端r:</p>
              <ul>
                {% for group in user.group_hats.all %}
                  <li><a class="text-green-500" href="#">{{ group.name }}</a></li>
                {% endfor %}
              </ul>
            {% else %}
              <p>Du hast keine Gruppen-H端te.</p>
            {% endif %}
          </div>
          {% endif %}
          
        </div>
    </div>

    <div class="flex">
      <button class="ml-auto button button-primary" type="submit">Speichern</button>
    </div>
  </form>
</div>
{% endblock %}