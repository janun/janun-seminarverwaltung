{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block head %}
  {{ wizard.form.media }}
{% endblock %}

{% block title %}
{{ block.super }}
{% if seminar_title %}
  „{{ seminar_title }}“ anmelden
{% else %}
  Neues Seminar anmelden
{% endif %} ({{ form.Meta.short_title }})
{% endblock %}

{% block content %}
<div class="wizard">

  <div class="wizard__head">
    {% if seminar_title %}
      <h1>„{{ seminar_title }}“ anmelden</h1>
    {% else %}
      <h1>Neues Seminar anmelden</h1>
    {% endif %}
  </div>

  <form action="" method="post">
    {% csrf_token %}
    {{ wizard.management_form }}

      <div class="wizard__content">

        <ul class="wizard__steps">
          {% for step_name, step_form in steps.items %}
            <li class="{% if wizard.steps.current == step_name %}wizard__steps--active{% endif %}
                       {% if step_form.is_valid %}wizard__steps--valid{% endif %}">
              <button class="button-reset" name="wizard_goto_step" type="submit" value="{{ step_name }}">
                {{ step_form.Meta.short_title }}
              </button>
            </li>
          {% endfor %}
        </ul>

        <div class="wizard__form">
          {% if form.Meta.title %}
            <h2>{{ form.Meta.title }}</h2>
          {% endif %}

          {% block before_form %}{% endblock %}
          {% block form %}
            {% if wizard.form.forms %}
              {{ wizard.form.management_form }}
              {% for form in wizard.form.forms %}
                {{ form|crispy }}
              {% endfor %}
            {% else %}
              {{ wizard.form|crispy }}
            {% endif %}
          {% endblock form %}
          {% block after_form %}{% endblock %}
        </div>
      </div>

      <div class="wizard__footer">
        <a class="button button-danger" onclick="return confirm('Wirklich Abbrechen?')" href="{% url "seminars:create" %}?reset">Abbrechen</a>
        {% if wizard.steps.last == wizard.steps.current %}
          <input class="button button-primary float-right" type="submit" value="Seminar anmelden"/>
        {% else %}
          <input class="button button-primary float-right" type="submit" value="Speichern & Weiter"/>
        {% endif %}
      </div>

  </form>
</div>
{% endblock content %}
